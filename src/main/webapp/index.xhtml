<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ac="http://beyondjava.net/angularFacesCore">
	<head>
		<title>AngularFaces 2.0 + BootsFaces 0.6.0 Tetris demo</title>
		<h:outputStylesheet library="tetris" name="angulartetris.css" target="head"></h:outputStylesheet>
		<h:outputScript library="tetris" name="tetromino.js" target="head"></h:outputScript>
		<h:outputScript library="tetris" name="gameController.js" target="head"></h:outputScript>
		<style>
		</style>
	</head>
	<body style="width:1000px" ng-controller="AngularTetrisController" ng-app="AngularTetris" addLabels="false">
		<container>
			<h3>AngularTetris</h3>
			<form prependId="false">
				<tabView>
					<tab title="AngularTetris!">
							<ngsync value="{{grid.rows}}" direction="serverToClient" />
							<container>
								<row>
									<column span="#{2+(settingsBean.numberOfColumns*2/7)}">
										<div class="divTable" id="playground">
											<div class="divRow" ng-repeat="r in grid.rows ">
												<div class="divCell" ng-repeat="cell in r.cells" id="cell"
													style="background-color: {{brickColor(cell.color)}}"></div>
											</div>
										</div>
									</column>
									<column span="2">
										<row>
											<column span="12">
												<inputText type="number" disabled="true" label="score"
													value="{{scoreBean.score}}" />
											</column>
										</row>
										<row>
											<column span="12">
												<b:button value="start game" style="margin-top:12px;" look="primary"
													ng-click="game.initGame(); game.startGame()" ng-hide="game.gameActive" onclick="return false;">
												</b:button>
											</column>
										</row>
									</column>
								</row>
							</container>
					</tab>
					<tab title="Settings">
						<b:panelGrid colSpans="3,9">
							<selectBooleanCheckbox value="{{settingsBean.preview}}" caption="preview (not implemented yet)" />
							<selectBooleanCheckbox value="{{settingsBean.ignoreGravity}}" caption="gravity"/>
							<inputText value="{{settingsBean.numberOfColumns}}" label="columns (width)"/>
							<inputText value="{{settingsBean.numberOfRows}}" label="rows (height)"/>
						</b:panelGrid>
						<b:commandButton value="apply changes" ng-show="showApplyButton" />
						<h:messages showSummary="true" showDetail="true" globalOnly="true"  />
					
					</tab>
					<tab title="High scores">
                        Number of highscores: #{highScoreTableBean.highscores.size()}
                        <h:dataTable var="score" value="#{highScoreTableBean.highscores}">
                            <h:column headerText="Name">
                                <h:outputText value="#{score.name}" />
                            </h:column>
                         
                            <h:column headerText="Score">
                                <h:outputText value="#{score.score}" />
                            </h:column>
                         
                        </h:dataTable>
                    </tab>
				</tabView>
			</form>
            <b:modal id="amodal" title="Congratulations!" styleClass="highscoreinputdialog">
                <form prependId="false" addLabels="false">
                    <b:row>
                        <b:column span="12" size="xs">
                            <p>You've made it into the hall of fame!</p>
                        </b:column>
                    </b:row>
                    <b:row>
                        <b:column span="12" size="xs">
                            <b:panelGrid colSpans="6,6" size="xs">
                                <b:inputText id="familyname" value="{{scoreBean.name}}" required="true" label="What's your name? *" />
                                <b:inputText id="score" value="{{scoreBean.score}}" label="Your score:" disabled="true"/>
                            </b:panelGrid>
                            <b:commandButton value="apply changes" action="#{scoreBean.saveScore}" dismiss="modal"/>
                        </b:column>
                    </b:row>
    
                    <f:facet name="footer">
                        <b:commandButton value="Ajax Submit" dismiss="modal" ajax="true" update="form:inform infoshow" id="ajaxcb"
                            look="primary" />
                        <b:button value="OK" look="primary" dismiss="modal" onclick="return false;" />
                    </f:facet>
                </form>
            </b:modal>
		</container>
        <h:messages />
	</body>
</f:view>
